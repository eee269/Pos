<!DOCTYPE html>
<html lang="ko" style="height: auto;">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>enter</title>
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/glyphicons.less">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../css/select2.min.css">
	<link rel="stylesheet" href="../css/AdminLTE.min.css">
	<link rel="stylesheet" href="../css/_all-skins.min.css">
	<link rel="stylesheet" href="../css/common2.css">
    <link rel="stylesheet" href="../css/jquery-ui.css">
    <link rel="stylesheet" href="../css/content.css">
    
	<script src="../js/jquery-2.2.3.min.js"></script>
	<script src="../js/jquery-ui.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/app.min.js"></script>
	<script src="../js/demo.js"></script>
	<script src="../js/common.js"></script>
	<script src="../js/jquery.mask.js"></script>
	<script src="../js/select2.full.min.js"></script>

<link type="text/css" rel="stylesheet" href="chrome-extension://dagdlcijhfbmgkjokkjicnnfimlebcll/style.css">
<script type="text/javascript" charset="utf-8" src="chrome-extension://dagdlcijhfbmgkjokkjicnnfimlebcll/page_context.js"></script>

</head>
<body class="skin-green sidebar-mini" style="height: auto;" screen_capture_injected="true">
<!-- Site wrapper -->
<div class="wrapper" style="height: auto;">

  <header class="main-header">
        <a href="https://activepos.net/active/index.php" class="logo">
         <span class="logo-mini"><b>E</b>RP</span>
          <span class="logo-lg"><b>enter</b></span>
        </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
	  <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <li class="dropdown tasks-menu">
		  				<a href="https://activepos.net/active/package.php" class="dropdown-toggle" style="background: rgba(0,0,0,0.3);">
              STARTER: 16-Feb-2021            </a>
					  </li>
		  <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img src="https://activepos.net/active/resource/lte/img/placeholder_male.jpg" class="user-image" alt="User Image">
              <span class="hidden-xs">seo jiyeon</span>
            </a>
            <ul class="dropdown-menu">
              <!-- User image -->
              <li class="user-header">
                <img src="https://activepos.net/active/resource/lte/img/placeholder_male.jpg" class="img-circle" alt="User Image">
                <p>seo jiyeon - Administrator</p>
              </li>
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-left"><a href="#" class="btn btn-default btn-flat">Profile</a></div>
                <div class="pull-right"><a href="https://activepos.net/active/logout.php" class="btn btn-default btn-flat">Sign out</a></div>
              </li>
            </ul>
          </li>
          <!-- Control Sidebar Toggle Button -->
        </ul>
      </div>
    </nav>
  </header>

  <!-- =============================================== -->

  <!-- Left side column. contains the sidebar -->
  <aside class="main-sidebar">
    <section class="sidebar">
      <ul class="sidebar-menu">
        <li class="header">MAIN NAVIGATION</li>
		        <li><a href="https://activepos.net/active/index.php"><i class="fa fa-angle-right text-yellow"></i> <span>Home / Dashboard</span></a></li>
		       	        <li class="treeview">
          <a href="#"><i class="fa fa-table"></i>
          <span>Sales Management</span>
          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
          </a>
		  <ul class="treeview-menu" style="display: none;">
		  				<li><a href="https://activepos.net/active/sales/new_sale.php"><i class="fa fa-angle-right"></i> New Sale</a></li>
						            <li><a href="https://activepos.net/active/sales/sales.php"><i class="fa fa-angle-right"></i> Sales History</a></li>
						          </ul>
        </li>
				        <li class="treeview">
          <a href="#"><i class="fa fa-table"></i>
          <span>Customers</span>
          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
          </a>
		  <ul class="treeview-menu">
		  	            <li><a href="https://activepos.net/active/customers/customer_categories.php"><i class="fa fa-angle-right"></i> Customers Categories</a></li>
						            <li><a href="https://activepos.net/active/customers/customers.php"><i class="fa fa-angle-right"></i> Customers List</a></li>
						            <li><a href="https://activepos.net/active/customers/cust_deposit.php"><i class="fa fa-angle-right"></i> Customer Deposit</a></li>
						            <li><a href="https://activepos.net/active/customers/cust_ledger.php"><i class="fa fa-angle-right"></i> Customer Ledger</a></li>
			          </ul>
        </li>
				        <li class="treeview">
          <a href="#"><i class="fa fa-table"></i>
          <span>Products / Items</span>
          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
          </a>
		  <ul class="treeview-menu">
		  				<li><a href="https://activepos.net/active/products/categories.php"><i class="fa fa-angle-right"></i> Product Categories</a></li>
						            <li><a href="https://activepos.net/active/products/items.php"><i class="fa fa-angle-right"></i> Products / Items</a></li>
						            <li><a href="https://activepos.net/active/products/group_items.php"><i class="fa fa-angle-right"></i> Group Items</a></li>
			          </ul>
        </li>
				        <li class="treeview">
          <a href="#"><i class="fa fa-table"></i>
          <span>Stock Control</span>
          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
          </a>
		  <ul class="treeview-menu">
		  				<li><a href="https://activepos.net/active/stock/suppliers.php"><i class="fa fa-angle-right"></i> Suppliers</a></li>
						            <li><a href="https://activepos.net/active/stock/purchase_orders.php"><i class="fa fa-angle-right"></i> Purchase Orders</a></li>
									<li><a href="https://activepos.net/active/stock/received.php"><i class="fa fa-angle-right"></i> GRN / PO Received</a></li>
						            <li><a href="https://activepos.net/active/stock/stock_take.php"><i class="fa fa-angle-right"></i> Direct Stock Take</a></li>
						            <li><a href="https://activepos.net/active/stock/stock_return.php"><i class="fa fa-angle-right"></i> Stock Return</a></li>
									            <li><a href="https://activepos.net/active/stock/stock_adjustment.php"><i class="fa fa-angle-right"></i> Stock Adjustment</a></li>
									<li><a href="https://activepos.net/active/stock/supplier_advance.php"><i class="fa fa-angle-right"></i> Supplier Advance</a></li>
									<li><a href="https://activepos.net/active/stock/supplier_billing.php"><i class="fa fa-angle-right"></i> Supplier Billing</a></li>
						            <li><a href="https://activepos.net/active/stock/stock_history.php"><i class="fa fa-angle-right"></i> Stock History Report</a></li>
						            <li><a href="https://activepos.net/active/stock/stock_valuation.php"><i class="fa fa-angle-right"></i> Stock Valuation</a></li>
						
          </ul>
        </li>
				        <li class="treeview">
          <a href="#"><i class="fa fa-table"></i>
          <span>Expenses</span>
          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
          </a>
		  <ul class="treeview-menu">
		  				<li><a href="https://activepos.net/active/expenses/categories.php"><i class="fa fa-angle-right"></i> Expense Categories</a></li>
						<li><a href="https://activepos.net/active/expenses/expenses.php"><i class="fa fa-angle-right"></i> Manage Expenses</a></li>			<li><a href="https://activepos.net/active/expenses/profit.php"><i class="fa fa-angle-right"></i> Sales / Expense Report</a></li>          </ul>
        </li>
				        <li><a href="https://activepos.net/active/locations.php"><i class="fa fa-angle-right text-yellow"></i> <span>Stores / Locations</span></a></li>
				        <li><a href="https://activepos.net/active/users.php"><i class="fa fa-angle-right text-yellow"></i> <span>Manage Users</span></a></li>
				        <li><a href="https://activepos.net/active/setting.php"><i class="fa fa-angle-right text-yellow"></i> <span>Settings</span></a></li>
		      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>
  <style>
.box_img{
	padding-bottom:10px;
}
</style>
<div class="content-wrapper" style="min-height: 805px;">
    <!-- Main content -->
    <section class="content">

      <!-- Default box -->
      <div class="box" style="margin-bottom:0px;">
	  	<div class="box-body" style="padding: 4px 10px;">
  	       <div id="my_all">
		   						<form method="POST" action="sales_process.php" class="form-horizontal" name="frm_new" id="frm_new">
			<input type="hidden" name="frm_action" id="frm_action" value="SALE">
			<div class="row">
				<div class="col-md-6 col-sm-6">
					<div class="main_grid_table" style="min-height: 575px; max-height: 575px; margin-bottom: 5px; overflow: hidden scroll;">
																	</div>
					<div class="col-md-9 hidden-xs">
						<div class="table-responsive" style="border:solid 1px #CCC;padding:5px;">
							<h4 class="text-center" style="margin-top:0px;">Recent Sale</h4>
							<div id="recent_sales"></div>
						</div>
					</div>
					<div class="col-md-3 hidden-xs">
						<div class="table-responsive" style="border:solid 1px #CCC;padding:5px;">
							<h4 class="text-center" style="margin-top:0px;margin-bottom:5px;">Saved Sale</h4>
							<div id="saved_sales"></div>
						</div>
					</div>
				</div>
				<div class="col-md-6 col-sm-6">
					<div class="form-group" style="margin:0px;">
						<div class="col-md-10 col-sm-8 col-xs-8"><input type="text" name="txt_search" id="txt_search" value="" class="form-control ac_input" placeholder="Search any Item / Scan Barcode" autocomplete="off"></div>
						<div class="col-md-1 col-sm-2 col-xs-2">
							<button type="button" name="search_prod" id="search_prod" class="btn btn-success form-control" onclick="javascript:print_sub('search_item.php',800,600);" title="SEARCH PRODUCTS (F4)"><span class="glyphicon glyphicon-search"></span></button>
						</div>
																		<div class="col-md-1 col-sm-2 col-xs-2"><a href="new_quick_item.php" class="btn btn-primary form-control" data-target="#new-item-modal" data-toggle="modal" title="ADD NEW PRODUCT"><span class="glyphicon glyphicon-plus"></span></a></div>
											</div>
					<div class="table-responsive main_sale_table" style="padding: 5px; min-height: 550px; max-height: 550px;" id="sales_items">
						<table class="table tbl_narrow table-responsive" style="font-size:10px;" id="inv_detail">
							<thead>
							<tr>
								<th width="50%" style="min-width:200px;">ITEM DETAIL</th>
								<th style="min-width:40px;">QTY</th>
								<th style="min-width:50px;">PRICE</th>
								<th style="min-width:40px;">DIST%</th>
								<th style="min-width:60px;">AMOUNT</th>
								<th style="width:30px;"></th>
							</tr>
							</thead>
							<!--<tr id="1">
								<td><input type="text" name="item_name_1" id="item_name_1" value="" class="form-control" readonly="Yes"></td>
								<td><input type="text" name="qty_1" id="qty_1" value="" class="form-control"></td>
								<td><input type="text" name="prate_1" id="prate_1" value="" class="form-control"></td>
								<td><input type="text" name="dist_1" id="dist_1" value="" class="form-control"></td>
								<td><input type="text" name="total_1" id="total_1" value="" class="form-control"></td>
								<td><a href="#" class="btn btn-danger btn-xs btnDelete"><span class="glyphicon glyphicon-remove"></span></a></td>
							</tr>-->
							
						<tbody><tr id="1"><td><input type="hidden" name="item_id_1" id="item_id_1" value="3642"><input type="hidden" name="item_name_1" id="item_name_1" value="Americano"><input type="hidden" name="item_code_1" id="item_code_1" value="coffee01"><input type="hidden" name="item_atrr_1" id="item_atrr_1" value=""><input type="hidden" name="is_group_1" id="is_group_1" value="No"><div style="font-weight:bold;">Americano</div><div"></div"></td><td><input type="text" name="qty_1" id="qty_1" value="1" class="form-control" onkeyup="cals(1);"></td><td><input type="text" name="prate_1" id="prate_1" value="0.00" class="form-control" onkeyup="cals(1);"></td><td><input type="text" name="dist_1" id="dist_1" value="0" class="form-control" onkeyup="cals(1);"></td><td><input type="text" name="total_1" id="total_1" value="" class="form-control" readonly="Yes"></td><td><a href="#" class="btn btn-danger btn-xs btnDelete"><span class="glyphicon glyphicon-remove"></span></a></td></tr></tbody></table>
					</div>
					<div style="display:block;padding:5px;">
						<div style="display:none;border:solid 1px #CCC;padding:5px;height:100px;" id="load_submit">
							Loading...
						</div>
						<div style="display:block;border:solid 1px #CCC;padding:5px;" id="calc_submit">
							<div class="form-group" style="margin:0px;margin-bottom:5px;">
								<div class="col-md-3 col-xs-4">
									  <label>Sale Date</label>
									 <input type="text" name="sale_date" id="sale_date" class="form-control" value="17-01-2021" readonly="Yes">
								</div>
								<div class="col-md-1 col-xs-4">
									  <label>Items</label>
									 <input type="text" name="total_items" id="total_items" class="form-control" value="0" readonly="Yes">
								</div>
								<div class="col-md-2 col-xs-4">
									  <label>Total Qty</label>
									 <input type="text" name="total_qty" id="total_qty" class="form-control" value="0" readonly="Yes">
								</div>
								<div class="col-md-2 col-xs-4">
									  <label>Sub Total</label>
									 <input type="text" name="sub_total" id="sub_total" class="form-control" value="0" readonly="Yes">
								</div>
								<div class="col-md-2 col-xs-4">
									  <label>Dist %</label>
									 <input type="number" name="tlt_dist" id="tlt_dist" class="form-control" value="0" onkeyup="cal_discount();">
									 <input type="hidden" name="dist_amount" id="dist_amount" value="0.00">
								</div>
								<div class="col-md-2 col-xs-4">
									  <label>Tax %</label>
									 <input type="number" name="tlt_tax" id="tlt_tax" class="form-control" value="0" onkeyup="cal_tax();">
									 <input type="hidden" name="tax_amount" id="tax_amount" value="0.00">
								</div>
							</div>
							<div class="form-group" style="margin:0px;padding: 5px;">
								<table class="table" style="margin-bottom:0px;">
									<tbody><tr><th class="text-left" style="background:#cffbcf;padding:5px;font-size:20px;">Total Sale</th>
									<th class="text-right" style="background:#cffbcf;padding:5px;font-size:20px;" id="TLT_AMOUNTS">USD <span id="TLT_AMOUNT">0.00</span></th>
								</tr></tbody></table>
							</div>
							<div class="form-group" style="margin:0px;margin-bottom:5px;">
								<label class="col-md-3 control-label">Add Payment:</label>
								<div class="col-md-3">
								<select name="pay_method" id="pay_method" class="form-control">
									<option value="Cash">Cash</option>
									<option value="Bank Deposit">Bank Deposit</option>
									<option value="Cheque">Cheque</option>
									<option value="Credit Card">Credit Card</option>
									<option value="Credit">Credit Sale</option>
								</select>
								</div>
								<div class="col-md-2"><input type="number" name="paid_amt" id="paid_amt" class="form-control" onkeyup="chk_balance();"></div>
								<label class="col-md-2 control-label">Balance:</label>
								<div class="col-md-2"><input type="text" name="balance" id="balance" class="form-control" readonly="Yes"></div>
							</div>
							<div class="form-group" style="margin:0px;margin-bottom:5px;">
								<!--<div class="col-md-2 col-xs-4"><button type="button" name="rtn_btn" id="rtn_btn" class="btn btn-warning" style="width:100%;"><div><span class="glyphicon glyphicon-share-alt"></span></div><div>Return</div></button></div>-->
								<div class="col-md-3 col-xs-6"><button type="button" name="can_btn" id="can_btn" class="btn btn-danger" onclick="cancel_sale();" style="width:100%;"><div><span class="glyphicon glyphicon-trash"></span></div><div>Cancel (F6)</div></button></div>
								<div class="col-md-3 col-xs-6"><button type="button" name="save_btn" id="save_btn" class="btn btn-primary" onclick="save_sale();" style="width:100%;"><div><span class="glyphicon glyphicon-floppy-disk"></span></div><div>Save (F7)</div></button></div>
								<div class="col-md-6 col-xs-12"><button type="button" name="pay_btn" id="pay_btn" class="btn btn-success" onclick="submit_sale();" style="width:100%;"><div style="font-weight:bold;">USD</div><div>Pay Now (F8)</div></button></div>
							</div>
							<div class="form-group" style="margin:0px;margin-bottom:0px;">
								<input type="hidden" name="cust_id" id="cust_id" value="">
								<div class="col-md-10"><input type="text" name="customer_name" id="customer_name" class="form-control ac_input" placeholder="Search a Customer..." autocomplete="off"></div>
																								<div class="col-md-2"><a href="new_quick_cust.php" class="btn btn-primary form-control" data-target="#new-customer-modal" data-toggle="modal"><span class="glyphicon glyphicon-plus"></span></a></div>
																<div id="cust_detail"></div>
								</div>
							</div>
						</div>
					</div>
					<input type="hidden" name="rowid" id="rowid" value="1">
					<input type="hidden" name="total_sale" id="total_sale" value="0.00">
					<input type="hidden" class="paid_amount" name="paid_amount" id="paid_amount" value="0">
				</div>
			</form>
			          </div>
		  
        </div>
      </div>
      <!-- /.box -->

    </section>
    <!-- /.content -->
  </div>

<div class="modal fade bs-modal-lg" id="new-customer-modal" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
</div>
<div class="modal fade bs-modal-lg" id="new-item-modal" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
</div>
  <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Version</b> 2.4.11
    </div>
    <strong>Copyright Â© 2014-2021 <a href="http://activepos.net" target="_blank">Active POS</a>.</strong> All rights
    reserved.
  </footer>
</div>
<script>
$(function() {
	
	  $('.btn-submit').click(function(e){
	  		$(this).prop('disabled', true);
			var $formId = $(this).parents('form');
			var formAction = $formId.attr('action');
			var err = '';
			var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
			$('.required',$formId).each(function(){
				var inputVal = $(this).val();
				//var $parentTag = $(this).parent();
				if(inputVal == ''){
					$(this).addClass('error');
					err = 'error';
				}else{
					$(this).removeClass('error');
				}
				if($(this).hasClass('email') == true){
					if(!emailReg.test(inputVal)){
						$(this).addClass('error');
						err = 'error';
					}
				}
			});
			if (err == '')
			{
				if ($('#csrf_token'))
				{
					var csrf_token = $('#csrf_token').val();
					var csrf_url = $('#csrf_url').val();
					$.ajax({
					  method: "POST",
					  url: formAction,
					  headers: {'X-CSRF-TOKEN': csrf_token},
					  data: $formId.serialize()
					})
					.done(function( msg ) {
						//alert( "Data Saved: " + msg );
						if (msg == "OK" || Number(msg) > 0)
						{
							//window.location.reload(true);
							window.location.href = csrf_url;
						}else{
							$('#err_msg').html(msg);
							$("#err_msg").show().delay(10000).fadeOut();
							$('.btn-submit').prop('disabled', false);
						}
					  });
				}else{
					//alert( "Token Not Exist");
					$('#err_msg').html("Token Not Exist");
					$("#err_msg").show().delay(10000).fadeOut();
					$('.btn-submit').prop('disabled', false);
				}
			}else{
				$('.btn-submit').prop('disabled', false);
			}
			e.preventDefault();
		});

	  $('.btn-update').click(function(e){
	  		$(this).prop('disabled', true);
			var $formId = $(this).parents('form');
			var formAction = $formId.attr('action');
			var err = '';
			var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
			$('.required',$formId).each(function(){
				var inputVal = $(this).val();
				//var $parentTag = $(this).parent();
				if(inputVal == ''){
					$(this).addClass('error');
					err = 'error';
				}else{
					$(this).removeClass('error');
				}
				if($(this).hasClass('email') == true){
					if(!emailReg.test(inputVal)){
						$(this).addClass('error');
						err = 'error';
					}
				}
			});
			if (err == '')
			{
				if ($('#csrf_token'))
				{
					var csrf_token = $('#csrf_token').val();
					var csrf_url = $('#csrf_url').val();

					$.ajax({
					  method: "POST",
					  url: formAction,
					  headers: {'X-CSRF-TOKEN': csrf_token},
					  data: $formId.serialize()
					})
					.done(function( msg ) {
						//alert( "Data Saved: " + msg );
						if (msg == "OK" || Number(msg) > 0)
						{
							window.location.href = csrf_url;
						}else{
							$('#err_msg').html(msg);
							$("#err_msg").show().delay(10000).fadeOut();
							$('.btn-update').prop('disabled', false);
						}
					  });
				}else{
					//alert( "Token Not Exist");
					$('#err_msg').html("Token Not Exist");
					$("#err_msg").show().delay(10000).fadeOut();
					$('.btn-update').prop('disabled', false);
				}
			}else{
				$('.btn-update').prop('disabled', false);
			}
			e.preventDefault();
		});
	  $('.btn-update-up').click(function(e){
	  		$(this).prop('disabled', true);
			var $formId = $(this).parents('form');
			var formAction = $formId.attr('action');
			var formData = new FormData($formId[0]);
			var err = '';
			var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
			$('.required',$formId).each(function(){
				var inputVal = $(this).val();
				//var $parentTag = $(this).parent();
				if(inputVal == ''){
					$(this).addClass('error');
					err = 'error';
				}else{
					$(this).removeClass('error');
				}
				if($(this).hasClass('email') == true){
					if(!emailReg.test(inputVal)){
						$(this).addClass('error');
						err = 'error';
					}
				}
			});
			if (err == '')
			{
				if ($('#csrf_token'))
				{
					var csrf_token = $('#csrf_token').val();
					var csrf_url = $('#csrf_url').val();

					$.ajax({
					  method: "POST",
					  url: formAction,
					  headers: {'X-CSRF-TOKEN': csrf_token},
					  //data: $formId.serialize()
					  data: formData,
					  async: false,
					  cache: false,
					  contentType: false,
					  processData: false
					})
					.done(function( msg ) {
						//alert( "Data Saved: " + msg );
						if (msg == "OK" || Number(msg) > 0)
						{
							window.location.href = csrf_url;
						}else{
							$('#err_msg').html(msg);
							$("#err_msg").show().delay(10000).fadeOut();
							$('.btn-update-up').prop('disabled', false);
						}
					  });
				}else{
					//alert( "Token Not Exist");
					$('#err_msg').html("Token Not Exist");
					$("#err_msg").show().delay(10000).fadeOut();
					$('.btn-update-up').prop('disabled', false);
				}
			}else{
				$('.btn-update-up').prop('disabled', false);
			}
			e.preventDefault();
		});
		$( "#from" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2021"
		});
		$( "#to" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$( "#dob" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "1940:2021"
		});
		$( "#date_join" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "1970:2021"
		});
		$( "#open_date" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2021"
		});
		$( "#pdate" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$( "#leave_from" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$( "#leave_to" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$( "#holiday_date" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$( "#v_date" ).datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$(".datefld").datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		$(".date_box").datepicker({
			dateFormat: "dd-mm-yy",
			changeYear: true,
			yearRange: "2013:2022"
		});
		
	});
function print_sub(url,wid,hht)
{
	leftw = (window.screen.width / 2) - ((wid / 2) + 10);
	microsite_window=window.open(url,'microsite_window','toolbar=no,location=no,borders=no,directories=no,status=yes,menubar=no,scrollbars=yes,top=50,left='+leftw+',resizable=no,width='+wid+',height='+hht+'');
	microsite_window.focus();
}
$().ready(function() {
	$(".select2").select2();
	//$('.p_time').mask('00:00');
});
$('#my-ajax-modal').on('hide.bs.modal', function () {
	$('#my-ajax-modal').removeData('bs.modal');                
});
</script>

<script type="text/javascript" src="../js/custom.js"></script>

<script type="text/javascript" src="../js/jq_patch.js"></script>
<script type="text/javascript" src="../js/jquery.autocomplete.js"></script>
<link rel="stylesheet" type="text/css" href="../css/jquery.autocomplete.css">
<script type="text/javascript">
$().ready(function() {
	
		$("#inv_detail").on("click", ".btnDelete", function(event) {
			$(this).closest("tr").remove();
			cal_total();
		});
		$('#frm_new').on('keyup keypress', function(e)
		{
			var keyCode = e.keyCode || e.which;
			if (keyCode === 13)
			{ 
				e.preventDefault();
				return false;
			}
		});
		//$('#txt_search').on('keyup keypress', function(e)
		$('#txt_search').on('keypress', function(e)
		{
			var keyCode = e.keyCode || e.which;
			if (keyCode === 13)
			{ 
				barcode_item();
				//alert('BARCODE');
			}
		});
		load_recent_sales();
		load_saved_sales();
		
		$("#txt_search").autocomplete("https://activepos.net/active/stock/get_items.php?frm_action=SALE", {
			width: 460,
			max: 20,
			matchContains: true,
			mustMatch: true,
			formatItem: function(row, i, max) {
				return row[0]+' : '+row[7]+' : PKR '+row[4];
			},
			selectFirst: false
		});
		
		$("#txt_search").result(function(event, data, formatted) {
			add_product(data[0],data[2],data[4],'GRID',data[7],data[8],data[1]);
		});
		
		function barcode_item()
		{
			if ($('#txt_search').val() != "")
			{
				var barcode = $('#txt_search').val();
				$.ajax({
					method: "POST",
					url: 'https://activepos.net/active/stock/get_items.php?frm_action=BARCODE',
					data: {q:barcode}
				})
				.done(function( msg ) {
					var data = msg.split("|");
					if (data[0] == "OK")
					{
						add_product(data[1],data[3],data[5],'BARCODE',data[8],data[9],data[2]);
					}else{
						alert('Barcode not Found');
					}
				});
			}
		}
		
		$("#customer_name").autocomplete("https://activepos.net/active/sales/get_customers.php?frm_action=SALE", {
			width: 460,
			max: 20,
			matchContains: true,
			mustMatch: true,
			formatItem: function(row, i, max) {
				return row[0]+' : '+row[2]+' : '+row[3];
			},
			selectFirst: false
		});
		
		$("#customer_name").result(function(event, data, formatted) {
			$('#cust_id').val(data[1]);
			var txt = '<span style="padding:3px;display: block;">'+data[0]+' : '+data[2]+' : '+data[3]+' <a href="javascript:cust_remove();"><span class="glyphicon glyphicon-remove"></span></a></span>';
			$('#cust_detail').html(txt);
			$('#customer_name').val('');
		});
		
});
$(document).keydown(function(e){
	var keycode=e.keyCode;
	//alert(keycode);
	if (keycode == 119) //F8
	{
		$("#pay_btn").trigger('click');
	}
	if (keycode == 118) //F7
	{
		$("#save_btn").trigger('click');
	}
	if (keycode == 117) //F6
	{
		$("#can_btn").trigger('click');
	}
	if (keycode == 115) //F4
	{
		$("#search_prod").trigger('click');
	}
});
</script>
<div class="ac_results" style="position: absolute; width: 460px; top: 96px; left: 1077.5px; display: none;"><ul style="max-height: 180px; overflow: auto;"><li class="ac_even"><strong>A</strong>meric<strong>a</strong>no :  : PKR 0.00</li></ul></div></body></html>